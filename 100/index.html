<!DOCTYPE html>
<html>
<head>
	<title>callback, promise and async | Modern JS!</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="bootstrap.min.css">
</head>
<body>
	<div class="container">
		<div class="w-50 mx-auto my-3 text-center">
			
		</div>
	</div>

	<script>

		let articles = [
			{ title: "First article", content: "Hello World!" },
			{ title: "Second article", content: "Hello JS!" },
		]

		function showArticles () {
			articles.forEach(article => console.log(article.title + ": " + article.content))
		}

		//promise
		function addArticle (article) {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					// length:2
					articlesLength = articles.length
					articles.push(article)
					// length:3
					if (articles.length == articlesLength + 1) {
						resolve("Article added successfully!")
					} else {
						reject("Something went wrong.")
					}
				}, 500)
			})
		}

		async function init () {
			await addArticle({ title: "Third article", content: "Bye Bye!" })
			showArticles()
		}

		init()

		//then and catch promise
		// addArticle({ title: "Third article", content: "Bye Bye!" })
		// 	.then(showArticles)
		// 	.catch(err => console.log(err))

		//callback
		// function addArticle (article, callback) {
		// 	setTimeout(() => {
		// 		articles.push(article)
		// 		callback()
		// 	}, 500)
		// }

		// addArticle({ title: "Third article", content: "Bye Bye!" }, showArticles)

	</script>
</body>
</html>